<!-- extend base layout -->
{% extends "/base.html" %}
{% block page_content %}
<div id="left_pane_wrapper">
<section id="left_pane">
{% if orders %}
	<table>
		<tr>
			<th class="title" colspan="5">Orders in {{active_world.name}}</th>
		</tr>
		<tr>
			<th>Order Name</th>
			<th>Description</th>
			<th>Owner</th>
            <th>Type</th>
            <th>Total Locations</th>
		</tr>
	{% for order in orders %}
		<tr>
		<td><a href="{{ url_for('.single_order',order=order.id)}}">{{ order.name }}</a></td>
		<td>{{order.description}}</td> 
		<td><a href="{{url_for('.userpage',userid=order.owner)}}">{{User.query.get(order.owner).name}}</a></td>
        <td>{{ order.order_type() }}</td>
        <td>{{ order.locations.count() + order.cities.count() }}</td>
		</tr>
	{% endfor %}
	</table>
{% else %}
	<p> No Orders in this world. </p>
{% endif %}
</section>
</div>
<div id="right_pane_wrapper">
<section id="right_pane">
{% if races %}

	<form action="" method="post" name="orders">
		{{ form.hidden_tag() }}
		<table>
			<tr>
				<th class="title" colspan="4">Create Order</th>
			</tr>
            {% for error in form.name.errors %}
            <tr>
                <td><span style="color: red;">Name: [{{ error }}]</span></td>
            </tr>
            {% endfor %}
            {% for error in form.owner.errors %}
            <tr>
                <td><span style="color: red;">Owner:[{{ error }}]</span></td>
            </tr>
            {% endfor %}
            {% for error in form.description.errors %}
           <tr>
                <td><span style="color: red;">Description:[{{ error }}]</span></td>
            </tr>
            {% endfor %}
            {% for error in form.type.errors %}
            <tr>
                <td><span style="color: red;">Type:[{{ error }}]</span></td>
            </tr>
            {% endfor %}
            
			<tr>
				<td>Name:</td>
				<td>{{ form.name(size=15, maxlength=140) }}</td>
                <td>Type:</td>
                <td>{{ form.type }}</td>
            </tr>
            <tr>
				<td>Description:</td>
				<td>{{ form.description(size=20, maxlength=140) }}</td>
				<td>Owner:</td>
				<td>{{ form.owner }}</td>
			</tr>
			<tr>
				<th class="sub_title" colspan="4"><input type="submit" value="Found Order!"></th>
			</tr>
		</table>
	</form>
{% else %}
	<p> There are no races, and they are needed to populate an order</p>
{% endif %}
{% endblock %}