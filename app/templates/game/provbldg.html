<!-- extend base layout -->
{% extends "/base.html" %}
{% block page_content %}
<div id="left_pane_wrapper">
<section id="left_pane">
	{% if buildings %}
		<table>
            <tr>
                <th class="title" colspan="6">Provincial Construction in {{active_world.name}}</th>
			<tr>
				<th>Name</th>
				<th>Description</th>
				<th>Location</th>
				<th>Built By</th>
				<th>Controlled By</th>
				<th>Age Built</th>
			</tr>
			{% for building in buildings %}
                {% if building.is_alive %}
				<tr>
					<td><a href="{{ url_for('.single_provbldg',bldg=building.id)}}">{{building.name}}</a></td>
					<td>{{building.description}}</td>
					<td><a href="{{url_for('.single_location',location_id=building.location)}}">{{building.return_location().coords()}}</a></td>
					<td><a href="{{ url_for('.single_race',race=building.built_by)}}">{{building.builder_name()}}</a></td>
					<td><a href="{{ url_for('.single_race',race=building.owned_by)}}">{{building.owner_name()}}</a></td>
					<td>{{building.age_turn}}</td>
                {%endif%}
				</tr>
			{% endfor %}
		</table>
    </section>
    </div>
    <div id="right_pane_wrapper">
    <section id="right_pane">
        <table>
            <tr>
                <th class="title" colspan="6">Ruins</th>
            </tr>
            <tr>
                <th>Name</th>
				<th>Description</th>
				<th>Location</th>
				<th>Built By</th>
				<th>Age Built</th>
                <th>Destroyed In</th>
            </tr>
            {% for building in buildings %}
                {% if not building.is_alive %}
                    <tr>
                        <td><a href="{{ url_for('.single_provbldg',bldg=building.id)}}">{{building.name}}</a></td>
                        <td>{{building.description}}</td>
                        <td><a href="{{url_for('.single_location',location_id=building.location)}}">{{building.return_location().coords()}}</a></td>
                        <td><a href="{{ url_for('.single_race',race=building.built_by)}}">{{building.builder_name()}}</a></td>
                        <td>{{building.age_turn}}</td>
                        <td>{{building.destroyed_in}}</td>
                    </tr>
                {% endif %}
            {% endfor %}
                    
                
	{% else %}
		<p> There are no Provincial Buildings in this world.</p>
	{% endif %}
	
{% if not races %}
	<p> Races build buildings, and there are no races in this world.</p>
{% else %}
	<form action="" method="post" name="buildings">
    {{ form.hidden_tag() }}
		<table>
            <tr>
                <th class="title" colspan="4">Construct Building</th>
            </tr>
				{% for error in form.name.errors %}
                <tr>
                    <td><span style="color: red;">Name: [{{ error }}]</span></td>
                </tr>
				{% endfor %}
				{% for error in form.description.errors %}
				<tr>
                    <td><span style="color: red;">Description: [{{ error }}]</span></td>
                </tr>
				{% endfor %}
				{% for error in form.number.errors %}
				<tr>
                    <td><span style="color: red;">Location: [{{ error }}]</span></td>
                </tr>
				{% endfor %}
				{% for error in form.built_by.errors %}
				<tr>
                    <td><span style="color: red;">Builders: [{{ error }}]</span></td>
                </tr>
				{% endfor %}
			<tr>
				<td>Name:</td>
                <td>{{ form.name(size=15, maxlength=140) }}</td>
				<td>Description:</td>
				<td>{{ form.description(size=20, maxlength=140) }}</td>
            </tr>
            <tr>
				<td>Location:</td>
				<td>{{ form.letter }}{{form.number}}</td>
				<td>Builders:</td>
				<td>{{ form.built_by }}</td>
			</tr>
			<tr>
				<th class="sub_title" colspan='4'><input type="submit" value="Construct Building!"></th>
			</tr>
		</table>
	</form>
{% endif %}
</section>
</div>
{% endblock %}